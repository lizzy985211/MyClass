import{h as v,i as k,w as A,c as w,a as B,u as N,l as R,o as j}from"./index-DXsCtUvq.js";import{i as D}from"./index-Bb6yjXMn.js";const E={class:"card"},C={__name:"QualityAnalysisView",setup(L){const t=N(),l=v(null);let i,s=null;async function c(){const o=t.params.school;s=await R(o),x()}function x(){var m,p,d;if(i||(i=D(l.value)),!s)return;const o=t.params.grade,u=t.params.klass,y=t.params.subject,_=t.params.examTab,e=(d=(p=(m=s==null?void 0:s.data)==null?void 0:m[o])==null?void 0:p[u])==null?void 0:d[y],r=_==="points"?(e==null?void 0:e.pointList)||[]:(e==null?void 0:e.examList)||[],a=[0,0,0,0,0];let f=0;r.forEach(h=>{f+=Number(h.score||0);const n=Number(h.score);n<60?a[0]++:n<70?a[1]++:n<80?a[2]++:n<90?a[3]++:a[4]++});const g=r.length?(f/r.length).toFixed(1):0,b={title:{text:"质量分析"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["<60","60-69","70-79","80-89","90-100"]},yAxis:[{type:"value"},{type:"value",position:"right",min:0,max:100}],series:[{name:"人数",type:"bar",data:a},{name:"平均分",type:"line",yAxisIndex:1,data:Array(5).fill(g)}]};i.setOption(b)}return k(c),A(()=>t.fullPath,c),(o,u)=>(j(),w("div",E,[B("div",{ref_key:"chartRef",ref:l,style:{height:"360px"}},null,512)]))}};export{C as default};
